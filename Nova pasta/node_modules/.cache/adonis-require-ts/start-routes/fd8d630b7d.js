"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Route_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Route"));
const Database_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Database"));
Route_1.default.get('test_db_connection', async ({ response }) => {
    await Database_1.default.report().then(({ health }) => {
        const { healthy, message } = health;
        if (healthy)
            return response.ok({ message });
        return response.status(500).json({ message });
    });
});
Route_1.default.group(() => {
    Route_1.default.post('login', 'AuthController.login');
    Route_1.default.post('users/', 'UsersController.store');
}).prefix('v1/api');
Route_1.default.group(() => {
    Route_1.default.resource('users/', 'UsersController').except(['store', 'index', 'destroy']);
    Route_1.default.put('reset-password', 'UsersController.resetPassword');
    Route_1.default.get('games/:id', 'GamesController.show');
    Route_1.default.get('bets/:id', 'BetsController.show');
    Route_1.default.post('bets/', 'BetsController.store');
    Route_1.default.delete('bets/:id', 'BetsController.destroy');
})
    .prefix('v1/api')
    .middleware(['auth', 'is:player']);
Route_1.default.group(() => {
    Route_1.default.resource('users/', 'UsersController').only(['index', 'destroy']);
    Route_1.default.resource('games/', 'GamesController').except(['show']);
    Route_1.default.post('access-allow/:id', 'UsersController.AccessAllow');
    Route_1.default.get('bets/', 'BetsController.index');
    Route_1.default.put('forget-password/:id', 'UsersController.forgetPassword');
})
    .prefix('v1/api')
    .middleware(['auth', 'is:admin']);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsb0ZBQTBDO0FBQzFDLDJGQUFpRDtBQUlqRCxlQUFLLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBdUIsRUFBRSxFQUFFO0lBQzFFLE1BQU0sa0JBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUU7UUFDMUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsR0FBRyxNQUFNLENBQUE7UUFFbkMsSUFBSSxPQUFPO1lBQUUsT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQTtRQUU1QyxPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQTtJQUMvQyxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBO0FBR0YsZUFBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUU7SUFDZixlQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxzQkFBc0IsQ0FBQyxDQUFBO0lBQzNDLGVBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLHVCQUF1QixDQUFDLENBQUE7QUFDL0MsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBR25CLGVBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFO0lBQ2YsZUFBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUE7SUFDakYsZUFBSyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSwrQkFBK0IsQ0FBQyxDQUFBO0lBRTVELGVBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLHNCQUFzQixDQUFDLENBQUE7SUFFOUMsZUFBSyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUscUJBQXFCLENBQUMsQ0FBQTtJQUM1QyxlQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxzQkFBc0IsQ0FBQyxDQUFBO0lBQzNDLGVBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLHdCQUF3QixDQUFDLENBQUE7QUFDcEQsQ0FBQyxDQUFDO0tBQ0MsTUFBTSxDQUFDLFFBQVEsQ0FBQztLQUNoQixVQUFVLENBQUMsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQTtBQUdwQyxlQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRTtJQUNmLGVBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUE7SUFFdEUsZUFBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO0lBRTVELGVBQUssQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsNkJBQTZCLENBQUMsQ0FBQTtJQUM3RCxlQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxzQkFBc0IsQ0FBQyxDQUFBO0lBQzFDLGVBQUssQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQTtBQUNwRSxDQUFDLENBQUM7S0FDQyxNQUFNLENBQUMsUUFBUSxDQUFDO0tBQ2hCLFVBQVUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlIGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvUm91dGUnXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvRGF0YWJhc2UnXG5cbmltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuXG5Sb3V0ZS5nZXQoJ3Rlc3RfZGJfY29ubmVjdGlvbicsIGFzeW5jICh7IHJlc3BvbnNlIH06IEh0dHBDb250ZXh0Q29udHJhY3QpID0+IHtcbiAgYXdhaXQgRGF0YWJhc2UucmVwb3J0KCkudGhlbigoeyBoZWFsdGggfSkgPT4ge1xuICAgIGNvbnN0IHsgaGVhbHRoeSwgbWVzc2FnZSB9ID0gaGVhbHRoXG5cbiAgICBpZiAoaGVhbHRoeSkgcmV0dXJuIHJlc3BvbnNlLm9rKHsgbWVzc2FnZSB9KVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlIH0pXG4gIH0pXG59KVxuXG4vLyBQdWJsaWMgUm91dGVzIEdyb3VwXG5Sb3V0ZS5ncm91cCgoKSA9PiB7XG4gIFJvdXRlLnBvc3QoJ2xvZ2luJywgJ0F1dGhDb250cm9sbGVyLmxvZ2luJylcbiAgUm91dGUucG9zdCgndXNlcnMvJywgJ1VzZXJzQ29udHJvbGxlci5zdG9yZScpXG59KS5wcmVmaXgoJ3YxL2FwaScpXG5cbi8vIFByaXZhdGUgUm91dGVzIEdyb3VwXG5Sb3V0ZS5ncm91cCgoKSA9PiB7XG4gIFJvdXRlLnJlc291cmNlKCd1c2Vycy8nLCAnVXNlcnNDb250cm9sbGVyJykuZXhjZXB0KFsnc3RvcmUnLCAnaW5kZXgnLCAnZGVzdHJveSddKVxuICBSb3V0ZS5wdXQoJ3Jlc2V0LXBhc3N3b3JkJywgJ1VzZXJzQ29udHJvbGxlci5yZXNldFBhc3N3b3JkJylcblxuICBSb3V0ZS5nZXQoJ2dhbWVzLzppZCcsICdHYW1lc0NvbnRyb2xsZXIuc2hvdycpXG5cbiAgUm91dGUuZ2V0KCdiZXRzLzppZCcsICdCZXRzQ29udHJvbGxlci5zaG93JylcbiAgUm91dGUucG9zdCgnYmV0cy8nLCAnQmV0c0NvbnRyb2xsZXIuc3RvcmUnKVxuICBSb3V0ZS5kZWxldGUoJ2JldHMvOmlkJywgJ0JldHNDb250cm9sbGVyLmRlc3Ryb3knKVxufSlcbiAgLnByZWZpeCgndjEvYXBpJylcbiAgLm1pZGRsZXdhcmUoWydhdXRoJywgJ2lzOnBsYXllciddKVxuXG4vLyBBZG1pbiBSb3V0ZXMgR3JvdXBcblJvdXRlLmdyb3VwKCgpID0+IHtcbiAgUm91dGUucmVzb3VyY2UoJ3VzZXJzLycsICdVc2Vyc0NvbnRyb2xsZXInKS5vbmx5KFsnaW5kZXgnLCAnZGVzdHJveSddKVxuXG4gIFJvdXRlLnJlc291cmNlKCdnYW1lcy8nLCAnR2FtZXNDb250cm9sbGVyJykuZXhjZXB0KFsnc2hvdyddKVxuXG4gIFJvdXRlLnBvc3QoJ2FjY2Vzcy1hbGxvdy86aWQnLCAnVXNlcnNDb250cm9sbGVyLkFjY2Vzc0FsbG93JylcbiAgUm91dGUuZ2V0KCdiZXRzLycsICdCZXRzQ29udHJvbGxlci5pbmRleCcpXG4gIFJvdXRlLnB1dCgnZm9yZ2V0LXBhc3N3b3JkLzppZCcsICdVc2Vyc0NvbnRyb2xsZXIuZm9yZ2V0UGFzc3dvcmQnKVxufSlcbiAgLnByZWZpeCgndjEvYXBpJylcbiAgLm1pZGRsZXdhcmUoWydhdXRoJywgJ2lzOmFkbWluJ10pXG4iXX0=