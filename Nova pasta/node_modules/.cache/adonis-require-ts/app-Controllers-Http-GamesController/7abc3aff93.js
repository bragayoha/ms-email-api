"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Database_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Database"));
const Cart_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Cart"));
const Game_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Game"));
const CreateGameValidator_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Validators/CreateGameValidator"));
const UpdateGameValidator_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Validators/UpdateGameValidator"));
class GamesController {
    async index({ response }) {
        const cart = await Cart_1.default.query().first();
        try {
            const games = await Game_1.default.query();
            return response.ok({ minCartValue: cart?.minCartValue, types: games });
        }
        catch (error) {
            return response.badRequest({ message: 'Error in list games', originalError: error.message });
        }
    }
    async store({ response, request }) {
        const data = await request.validate(CreateGameValidator_1.default);
        let game;
        const trx = await Database_1.default.transaction();
        try {
            game = await Game_1.default.create({
                type: data.type,
                description: data.description,
                range: data.range,
                price: data.price,
                minAndMaxNumber: data.minAndMaxNumber,
                color: data.color,
            }, trx);
        }
        catch (error) {
            trx.rollback();
            return response.badRequest({ message: 'Error in create game', originalError: error.message });
        }
        let gameFind;
        try {
            gameFind = await Game_1.default.query().where('id', game.id);
        }
        catch (error) {
            trx.rollback();
            return response.badRequest({ message: 'Error in game find', originalError: error.message });
        }
        trx.commit();
        return response.ok(gameFind);
    }
    async show({ response, params }) {
        const gameId = params.id;
        try {
            const game = await Game_1.default.query().where('id', gameId);
            return response.ok(game);
        }
        catch (error) {
            return response.notFound({ message: 'Game not found', originalError: error.message });
        }
    }
    async update({ request, response, params }) {
        const data = await request.validate(UpdateGameValidator_1.default);
        const gameId = params.id;
        let game;
        const trx = await Database_1.default.transaction();
        try {
            game = await Game_1.default.findByOrFail('id', gameId);
            game
                .merge({
                type: data.type,
                description: data.description,
                range: data.range,
                price: data.price,
                minAndMaxValue: data.minAndMaxValue,
                color: data.color,
            }, trx)
                .save();
        }
        catch (error) {
            trx.rollback();
            return response.badRequest({ message: 'Error in update game', originalError: error.message });
        }
        let gameFind;
        try {
            gameFind = await Game_1.default.query().where('id', game.id);
        }
        catch (error) {
            trx.rollback();
            return response.badRequest({ message: 'Error in find game', originalError: error.message });
        }
        trx.commit();
        return response.ok(gameFind);
    }
    async destroy({ response, params }) {
        const gameId = params.id;
        try {
            const game = await Game_1.default.findByOrFail('id', gameId);
            await game.delete();
            return response.ok({ message: 'Game deleted successfully' });
        }
        catch (error) {
            return response.notFound({ message: 'Game not found', originalError: error.message });
        }
    }
}
exports.default = GamesController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZXNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiR2FtZXNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsMkZBQWlEO0FBQ2pELGlGQUFrQztBQUNsQyxpRkFBa0M7QUFDbEMsbUhBQW9FO0FBQ3BFLG1IQUFvRTtBQUVwRSxNQUFxQixlQUFlO0lBQzNCLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLEVBQXVCO1FBQ2xELE1BQU0sSUFBSSxHQUFHLE1BQU0sY0FBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRXZDLElBQUk7WUFDRixNQUFNLEtBQUssR0FBRyxNQUFNLGNBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtZQUVoQyxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQTtTQUN2RTtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLGFBQWEsRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQTtTQUM3RjtJQUNILENBQUM7SUFFTSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBdUI7UUFDM0QsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsUUFBUSxDQUFDLDZCQUFtQixDQUFDLENBQUE7UUFFeEQsSUFBSSxJQUFJLENBQUE7UUFFUixNQUFNLEdBQUcsR0FBRyxNQUFNLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7UUFFeEMsSUFBSTtZQUNGLElBQUksR0FBRyxNQUFNLGNBQUksQ0FBQyxNQUFNLENBQ3RCO2dCQUNFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixXQUFXLEVBQUUsSUFBSSxDQUFDLFdB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QUE7UUFFWixJQUFJO1lBQ0YsUUFBUSxHQUFHLE1BQU0sY0FBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1NBQ25EO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUE7WUFDZCxPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsYUFBYSxFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO1NBQzVGO1FBRUQsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFBO1FBQ1osT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzlCLENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBdUI7UUFDNUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQTtRQUV4QixJQUFJO1lBQ0YsTUFBTSxJQUFJLEdBQUcsTUFBTSxjQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQTtZQUNsRCxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtZQUVuQixPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsQ0FBQyxDQUFBO1NBQzdEO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxPQUFPLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO1NBQ3RGO0lBQ0gsQ0FBQztDQUNGO0FBcEhELGtDQW9IQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSHR0cENvbnRleHRDb250cmFjdCB9IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHQnXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvRGF0YWJhc2UnXG5pbXBvcnQgQ2FydCBmcm9tICdBcHAvTW9kZWxzL0NhcnQnXG5pbXBvcnQgR2FtZSBmcm9tICdBcHAvTW9kZWxzL0dhbWUnXG5pbXBvcnQgQ3JlYXRlR2FtZVZhbGlkYXRvciBmcm9tICdBcHAvVmFsaWRhdG9ycy9DcmVhdGVHYW1lVmFsaWRhdG9yJ1xuaW1wb3J0IFVwZGF0ZUdhbWVWYWxpZGF0b3IgZnJvbSAnQXBwL1ZhbGlkYXRvcnMvVXBkYXRlR2FtZVZhbGlkYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZXNDb250cm9sbGVyIHtcbiAgcHVibGljIGFzeW5jIGluZGV4KHsgcmVzcG9uc2UgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBDYXJ0LnF1ZXJ5KCkuZmlyc3QoKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGdhbWVzID0gYXdhaXQgR2FtZS5xdWVyeSgpXG5cbiAgICAgIHJldHVybiByZXNwb25zZS5vayh7IG1pbkNhcnRWYWx1ZTogY2FydD8ubWluQ2FydFZhbHVlLCB0eXBlczogZ2FtZXMgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoeyBtZXNzYWdlOiAnRXJyb3IgaW4gbGlzdCBnYW1lcycsIG9yaWdpbmFsRXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc3RvcmUoeyByZXNwb25zZSwgcmVxdWVzdCB9OiBIdHRwQ29udGV4dENvbnRyYWN0KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QudmFsaWRhdGUoQ3JlYXRlR2FtZVZhbGlkYXRvcilcblxuICAgIGxldCBnYW1lXG5cbiAgICBjb25zdCB0cnggPSBhd2FpdCBEYXRhYmFzZS50cmFuc2FjdGlvbigpXG5cbiAgICB0cnkge1xuICAgICAgZ2FtZSA9IGF3YWl0IEdhbWUuY3JlYXRlKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHJhbmdlOiBkYXRhLnJhbmdlLFxuICAgICAgICAgIHByaWNlOiBkYXRhLnByaWNlLFxuICAgICAgICAgIG1pbkFuZE1heE51bWJlcjogZGF0YS5taW5BbmRNYXhOdW1iZXIsXG4gICAgICAgICAgY29sb3I6IGRhdGEuY29sb3IsXG4gICAgICAgIH0sXG4gICAgICAgIHRyeFxuICAgICAgKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0cngucm9sbGJhY2soKVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoeyBtZXNzYWdlOiAnRXJyb3IgaW4gY3JlYXRlIGdhbWUnLCBvcmlnaW5hbEVycm9yOiBlcnJvci5tZXNzYWdlIH0pXG4gICAgfVxuXG4gICAgbGV0IGdhbWVGaW5kXG5cbiAgICB0cnkge1xuICAgICAgZ2FtZUZpbmQgPSBhd2FpdCBHYW1lLnF1ZXJ5KCkud2hlcmUoJ2lkJywgZ2FtZS5pZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdHJ4LnJvbGxiYWNrKClcbiAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KHsgbWVzc2FnZTogJ0Vycm9yIGluIGdhbWUgZmluZCcsIG9yaWdpbmFsRXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICB9XG5cbiAgICB0cnguY29tbWl0KClcbiAgICByZXR1cm4gcmVzcG9uc2Uub2soZ2FtZUZpbmQpXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2hvdyh7IHJlc3BvbnNlLCBwYXJhbXMgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IGdhbWVJZCA9IHBhcmFtcy5pZFxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGdhbWUgPSBhd2FpdCBHYW1lLnF1ZXJ5KCkud2hlcmUoJ2lkJywgZ2FtZUlkKVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2Uub2soZ2FtZSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLm5vdEZvdW5kKHsgbWVzc2FnZTogJ0dhbWUgbm90IGZvdW5kJywgb3JpZ2luYWxFcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGUoeyByZXF1ZXN0LCByZXNwb25zZSwgcGFyYW1zIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC52YWxpZGF0ZShVcGRhdGVHYW1lVmFsaWRhdG9yKVxuXG4gICAgY29uc3QgZ2FtZUlkID0gcGFyYW1zLmlkXG5cbiAgICBsZXQgZ2FtZVxuXG4gICAgY29uc3QgdHJ4ID0gYXdhaXQgRGF0YWJhc2UudHJhbnNhY3Rpb24oKVxuXG4gICAgdHJ5IHtcbiAgICAgIGdhbWUgPSBhd2FpdCBHYW1lLmZpbmRCeU9yRmFpbCgnaWQnLCBnYW1lSWQpXG4gICAgICBnYW1lXG4gICAgICAgIC5tZXJnZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHJhbmdlOiBkYXRhLnJhbmdlLFxuICAgICAgICAgICAgcHJpY2U6IGRhdGEucHJpY2UsXG4gICAgICAgICAgICBtaW5BbmRNYXhWYWx1ZTogZGF0YS5taW5BbmRNYXhWYWx1ZSxcbiAgICAgICAgICAgIGNvbG9yOiBkYXRhLmNvbG9yLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJ4XG4gICAgICAgIClcbiAgICAgICAgLnNhdmUoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0cngucm9sbGJhY2soKVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoeyBtZXNzYWdlOiAnRXJyb3IgaW4gdXBkYXRlIGdhbWUnLCBvcmlnaW5hbEVycm9yOiBlcnJvci5tZXNzYWdlIH0pXG4gICAgfVxuXG4gICAgbGV0IGdhbWVGaW5kXG5cbiAgICB0cnkge1xuICAgICAgZ2FtZUZpbmQgPSBhd2FpdCBHYW1lLnF1ZXJ5KCkud2hlcmUoJ2lkJywgZ2FtZS5pZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdHJ4LnJvbGxiYWNrKClcbiAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KHsgbWVzc2FnZTogJ0Vycm9yIGluIGZpbmQgZ2FtZScsIG9yaWdpbmFsRXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICB9XG5cbiAgICB0cnguY29tbWl0KClcbiAgICByZXR1cm4gcmVzcG9uc2Uub2soZ2FtZUZpbmQpXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVzdHJveSh7IHJlc3BvbnNlLCBwYXJhbXMgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIGNvbnN0IGdhbWVJZCA9IHBhcmFtcy5pZFxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGdhbWUgPSBhd2FpdCBHYW1lLmZpbmRCeU9yRmFpbCgnaWQnLCBnYW1lSWQpXG4gICAgICBhd2FpdCBnYW1lLmRlbGV0ZSgpXG5cbiAgICAgIHJldHVybiByZXNwb25zZS5vayh7IG1lc3NhZ2U6ICdHYW1lIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2Uubm90Rm91bmQoeyBtZXNzYWdlOiAnR2FtZSBub3QgZm91bmQnLCBvcmlnaW5hbEVycm9yOiBlcnJvci5tZXNzYWdlIH0pXG4gICAgfVxuICB9XG59XG4iXX0=